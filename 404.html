<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>リダイレクト</title>
  </head>
  <body>
    <noscript>JavaScriptを有効にしてください</noscript>
  </body>
  <script>
    const getURL = () =>location.hash.slice(1)
    document.body.innerHTML = `<h1>リダイレクトの警告</h1>"${getURL()}"にリダイレクトしようとしています<br>数秒経ってもリダイレクトしない場合には<a href="${getURL()}">こちら</a>をクリックしてください`

    /* https://laboradian.com/js-wait を改変*/
    var wait = function(sec) {
      return function() {
        return new Promise(function(resolve/*, reject*/) {
          for(var i=0; i<2; i++)setTimeout(resolve,1000)
        });
      }
    };
    Promise.resolve()
      .then(wait(2)) // ここで10秒待つ（「Promiseオブジェクトを返す関数」を thenに渡しています）
      .then(function() {
      // ここに目的の処理を書きます。
      location.href = getURL()
    })
      .catch(function (err) {
      console.error(err);
      self.result_message = error;
    });
  </script>
</html>
